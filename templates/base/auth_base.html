<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}TransportadorPRO{% endblock %}</title>
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="https://hejhbdkofhkdnzokjklr.supabase.co/storage/v1/object/public/logos//favicon.ico">
    <link rel="shortcut icon" type="image/x-icon" href="https://hejhbdkofhkdnzokjklr.supabase.co/storage/v1/object/public/logos//favicon.ico">
    <link rel="apple-touch-icon" href="https://hejhbdkofhkdnzokjklr.supabase.co/storage/v1/object/public/logos//favicon.ico">
    <!-- Estilos -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.3/font/bootstrap-icons.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Preload do vídeo com prioridade baixa -->
    <link rel="preload" href="https://hejhbdkofhkdnzokjklr.supabase.co/storage/v1/object/public/logos//0228.mp4" as="video" type="video/mp4" fetchpriority="low">
    <style>
        :root {
            --bs-primary: #4e83fd;
            --bs-primary-rgb: 78, 131, 253;
            --bs-dark-blue: #0f172a;
            --bs-border-color: #e5e7eb;
            --bs-muted-foreground: #64748b;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            background-color: #fff;
            min-height: 100vh;
            margin: 0;
            padding: 0;
            overflow-x: hidden;
        }
        
        /* Layout principal */
        .auth-container {
            display: grid;
            min-height: 100vh;
        }
        
        /* Responsividade */
        @media (min-width: 992px) {
            .auth-container {
                grid-template-columns: 1fr 1fr;
            }
        }
        
        /* Lado do formulário */
        .auth-form-side {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            padding: 1.5rem;
        }
        
        @media (min-width: 768px) {
            .auth-form-side {
                padding: 2.5rem;
            }
        }
        
        /* Logo e cabeçalho */
        .auth-header {
            display: flex;
            justify-content: center;
            gap: 0.5rem;
        }
        
        @media (min-width: 768px) {
            .auth-header {
                justify-content: flex-start;
            }
        }
        
        .auth-logo-container {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-weight: 500;
            text-decoration: none;
            color: var(--bs-dark);
        }
        
        .auth-logo-icon {
            display: flex;
            height: 1.5rem;
            width: 1.5rem;
            align-items: center;
            justify-content: center;
            border-radius: 0.375rem;
            background-color: var(--bs-primary);
            color: white;
        }
        
        .auth-form-container {
            display: flex;
            flex: 1;
            align-items: center;
            justify-content: center;
        }
        
        .auth-form-wrapper {
            width: 100%;
            max-width: 380px;
        }
        
        /* Lado do vídeo */
        .auth-video-side {
            position: relative;
            display: none;
            background-color: #f3f4f6;
        }
        
        @media (min-width: 992px) {
            .auth-video-side {
                display: block;
            }
        }
        
        .auth-video-side video {
            position: absolute;
            inset: 0;
            height: 100%;
            width: 100%;
            object-fit: cover;
            transition: opacity 0.5s ease-in-out;
        }
        
        /* Estilos para o placeholder do vídeo */
        .video-placeholder {
            position: absolute;
            inset: 0;
            height: 100%;
            width: 100%;
            background-color: #0f172a;
            z-index: 3;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: opacity 0.5s ease-in-out;
        }
        
        .placeholder-spinner {
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        /* Overlay para escurecer o vídeo */
        .auth-video-overlay {
            position: absolute;
            inset: 0;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 2;
        }
        
        /* Conteúdo do vídeo */
        .auth-video-content {
            position: absolute;
            inset: 0;
            z-index: 3;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 2rem;
            color: white;
        }
        
        .auth-video-logo {
            max-width: 90%;
            width: 900px;
            margin-bottom: 1rem;
        }
        
        .auth-slogan {
            font-size: 1.5rem;
            color: white;
            text-align: center;
            margin-bottom: 2rem;
            font-weight: 300;
            letter-spacing: 0.5px;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }
        
        .auth-video-title {
            font-size: 2.25rem;
            font-weight: 700;
            margin-bottom: 0.75rem;
            text-align: center;
        }
        
        .auth-video-text {
            font-size: 1.125rem;
            text-align: center;
            opacity: 0.9;
            max-width: 500px;
            line-height: 1.5;
        }
        
        /* Estilos do formulário */
        .form-group {
            display: grid;
            gap: 0.5rem;
            margin-bottom: 1.5rem;
        }
        
        .form-label {
            font-size: 0.875rem;
            font-weight: 500;
        }
        
        .form-control {
            display: block;
            width: 100%;
            padding: 0.5rem 0.75rem;
            font-size: 0.875rem;
            line-height: 1.5;
            border: 1px solid var(--bs-border-color);
            border-radius: 0.375rem;
            transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;
        }
        
        .form-control:focus {
            border-color: var(--bs-primary);
            outline: 0;
            box-shadow: 0 0 0 2px rgba(var(--bs-primary-rgb), 0.25);
        }
        
        /* Botões */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 0.5rem 1rem;
            font-size: 0.875rem;
            font-weight: 500;
            line-height: 1.5;
            text-align: center;
            white-space: nowrap;
            vertical-align: middle;
            cursor: pointer;
            user-select: none;
            border: 1px solid transparent;
            border-radius: 0.375rem;
            transition: color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;
        }
        
        .input-group-text {
            display: flex;
            align-items: center;
            padding: 0.5rem 0.75rem;
            font-size: 0.875rem;
            font-weight: 400;
            line-height: 1.5;
            color: #6c757d;
            text-align: center;
            white-space: nowrap;
            background-color: #f9fafb;
            border: 1px solid var(--bs-border-color);
            border-radius: 0.375rem 0 0 0.375rem;
            border-right: 0;
        }
        
        /* Ajustes para modo escuro */
        [data-bs-theme="dark"] body {
            background-color: #1e293b;
            color: #e2e8f0;
        }
        
        [data-bs-theme="dark"] .auth-form-side {
            background-color: #1e293b;
        }
        
        [data-bs-theme="dark"] .auth-logo-container {
            color: #e2e8f0;
        }
        
        [data-bs-theme="dark"] .form-control {
            background-color: #2d3748;
            border-color: #4a5568;
            color: #e2e8f0;
        }
        
        [data-bs-theme="dark"] .input-group-text {
            background-color: #2d3748;
            border-color: #4a5568;
            color: #e2e8f0;
        }
        
        [data-bs-theme="dark"] .btn-outline {
            color: #e2e8f0;
            border-color: #4a5568;
        }
        
        [data-bs-theme="dark"] .btn-outline:hover {
            background-color: #2d3748;
        }
        
        /* Regra para o tema escuro do separador foi removida */
        
        .btn-primary {
            color: #fff;
            background-color: var(--bs-primary);
            border-color: var(--bs-primary);
        }
        
        .btn-primary:hover {
            background-color: #3a70e3;
            border-color: #3a70e3;
        }
        
        .btn-outline {
            color: var(--bs-dark);
            background-color: transparent;
            border-color: var(--bs-border-color);
        }
        
        .btn-outline:hover {
            background-color: #f3f4f6;
        }
        
        .w-full {
            width: 100%;
        }
        
        /* Separador */
        .separator {
            display: flex;
            align-items: center;
            text-align: center;
            font-size: 0.875rem;
            margin: 0.5rem 0;
            color: #6c757d;
        }
        
        .separator::before,
        .separator::after {
            content: '';
            flex: 1;
            border-bottom: 1px solid var(--bs-border-color);
        }
        
        .separator::before {
            margin-right: 0.5em;
        }
        
        .separator::after {
            margin-left: 0.5em;
        }
        
        .separator span {
            padding: 0 0.5rem;
            color: var(--bs-muted-foreground);
        }
        
        /* Links e textos */
        .text-muted {
            color: var(--bs-muted-foreground);
        }
        
        .text-sm {
            font-size: 0.875rem;
        }
        
        .text-center {
            text-align: center;
        }
        
        .link {
            color: var(--bs-primary);
            text-decoration: none;
        }
        
        .link:hover {
            text-decoration: underline;
            text-underline-offset: 4px;
        }
        
        /* Utilitários */
        .d-flex {
            display: flex;
        }
        
        .justify-between {
            justify-content: space-between;
        }
        
        .items-center {
            align-items: center;
        }
        
        .mb-1 {
            margin-bottom: 0.25rem;
        }
        
        .mb-2 {
            margin-bottom: 0.5rem;
        }
        
        .mb-4 {
            margin-bottom: 1rem;
        }
        
        .mb-6 {
            margin-bottom: 1.5rem;
        }
        
        .mt-4 {
            margin-top: 1rem;
        }
        
        .ml-auto {
            margin-left: auto;
        }
        
        /* Botão de alternar tema */
        .theme-toggle {
            background: transparent;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.25rem;
            color: var(--bs-muted-foreground);
            padding: 0.25rem;
            border-radius: 0.375rem;
            transition: background-color 0.2s;
        }
        
        .theme-toggle:hover {
            background-color: rgba(0, 0, 0, 0.05);
        }
        
        [data-bs-theme="dark"] .theme-toggle:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }
        
        .theme-icon-light {
            display: none;
        }
        
        .theme-icon-dark {
            display: block;
        }
        
        [data-bs-theme="dark"] .theme-icon-light {
            display: block;
        }
        
        [data-bs-theme="dark"] .theme-icon-dark {
            display: none;
        }
        

        
        /* Estilos para o rodapé */
        .auth-footer {
            background-color: #f8f9fa;
            border-top: 1px solid #e9ecef;
        }
        
        [data-bs-theme="dark"] .auth-footer {
            background-color: #1e293b;
            border-top: 1px solid #2d3748;
        }
    </style>
    {% block extra_css %}{% endblock %}
</head>
<body>
    <div class="auth-container">
        <!-- Lado do formulário -->
        <div class="auth-form-side">
            <div class="auth-header">
                <button id="theme-toggle" class="theme-toggle ml-auto">
                    <i class="bi bi-sun-fill theme-icon-light"></i>
                    <i class="bi bi-moon-fill theme-icon-dark"></i>
                </button>
            </div>
            
            <div class="auth-form-container">
                <div class="auth-form-wrapper">
                    {% block content %}{% endblock %}
                    
                    <!-- Footer dentro do formulário -->
                    <div class="mt-4 pt-2 border-top text-center">
                        <img id="lwl-logo" src="https://hejhbdkofhkdnzokjklr.supabase.co/storage/v1/object/public/logos//logo.svg" alt="LWL Solutions" height="30" class="mb-1">
                        <p class="text-muted mb-0" style="font-size: 0.65rem;">
                            LWL Solutions Ltda &copy; 2020-{% now "Y" %} - Todos os direitos reservados<br>
                            CNPJ: 48.837.685/0001-51
                        </p>
                    </div>
                    
                    <script>
                    // Função para verificar o tema atual e trocar a logo
                    function updateLogoForTheme() {
                        const isDarkMode = document.documentElement.getAttribute('data-bs-theme') === 'dark';
                        const logoElement = document.getElementById('lwl-logo');
                        
                        if (isDarkMode) {
                            logoElement.src = 'https://hejhbdkofhkdnzokjklr.supabase.co/storage/v1/object/public/logos//logo%20lwl%20claro.svg';
                        } else {
                            logoElement.src = 'https://hejhbdkofhkdnzokjklr.supabase.co/storage/v1/object/public/logos//logo.svg';
                        }
                    }
                    
                    // Executar quando a página carregar
                    document.addEventListener('DOMContentLoaded', updateLogoForTheme);
                    
                    // Observar mudanças no atributo data-bs-theme
                    const observer = new MutationObserver(function(mutations) {
                        mutations.forEach(function(mutation) {
                            if (mutation.attributeName === 'data-bs-theme') {
                                updateLogoForTheme();
                            }
                        });
                    });
                    
                    observer.observe(document.documentElement, { attributes: true });
                    </script>
                </div>
            </div>
        </div>
        
        <!-- Lado do vídeo -->
        <div class="auth-video-side">
            <!-- Placeholder enquanto o vídeo carrega -->
            <div class="video-placeholder" id="video-placeholder">
                <div class="placeholder-spinner">
                    <div class="spinner-border text-light" role="status">
                        <span class="visually-hidden">Carregando...</span>
                    </div>
                </div>
            </div>
            
            <video id="background-video" autoplay muted loop playsinline preload="auto" style="opacity: 0;">
                <source src="{% block video_source %}https://hejhbdkofhkdnzokjklr.supabase.co/storage/v1/object/public/logos//0228.mp4{% endblock %}" type="video/mp4">
                Seu navegador não suporta vídeos HTML5.
            </video>
            <div class="auth-video-overlay"></div>
            <div class="auth-video-content">
                <img src="{% block logo_url %}https://hejhbdkofhkdnzokjklr.supabase.co/storage/v1/object/public/logos//logo-transportadorpro-branco.svg{% endblock %}" alt="Logo" class="auth-video-logo">
                <p class="auth-slogan">{% block slogan %}A solução completa para sua frota{% endblock %}</p>
            </div>
        </div>
    </div>
    
    <!-- O footer foi movido para dentro do formulário -->
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    
    <script>
        // Script para alternar entre modo claro e escuro
        document.addEventListener('DOMContentLoaded', function() {
            const themeToggle = document.getElementById('theme-toggle');
            const prefersDarkScheme = window.matchMedia('(prefers-color-scheme: dark)');
            
            // Verificar preferência salva ou usar preferência do sistema
            const currentTheme = localStorage.getItem('theme') || 
                                (prefersDarkScheme.matches ? 'dark' : 'light');
            
            if (currentTheme === 'dark') {
                document.documentElement.setAttribute('data-bs-theme', 'dark');
            } else {
                document.documentElement.setAttribute('data-bs-theme', 'light');
            }
            
            // Alternar tema ao clicar no botão
            themeToggle.addEventListener('click', function() {
                let theme;
                
                if (document.documentElement.getAttribute('data-bs-theme') === 'dark') {
                    document.documentElement.setAttribute('data-bs-theme', 'light');
                    theme = 'light';
                } else {
                    document.documentElement.setAttribute('data-bs-theme', 'dark');
                    theme = 'dark';
                }
                
                localStorage.setItem('theme', theme);
            });
        });
    </script>
    
    {% block extra_js %}{% endblock %}
    
    <script>
        // Script para gerenciar o carregamento do vídeo
        document.addEventListener('DOMContentLoaded', function() {
            const video = document.getElementById('background-video');
            const placeholder = document.getElementById('video-placeholder');
            
            if (video && placeholder) {
                // Verificar se o vídeo já está em cache
                if (video.readyState >= 3) { // HAVE_FUTURE_DATA ou HAVE_ENOUGH_DATA
                    showVideo();
                } else {
                    // Adicionar evento para quando o vídeo estiver pronto
                    video.addEventListener('canplay', showVideo);
                    
                    // Adicionar um timeout para mostrar o vídeo mesmo se demorar muito
                    setTimeout(showVideo, 3000);
                }
                
                function showVideo() {
                    video.style.opacity = '1';
                    placeholder.style.opacity = '0';
                    
                    // Remover o placeholder após a transição
                    setTimeout(function() {
                        placeholder.style.display = 'none';
                    }, 500);
                }
            }
        });
    </script>
</body>
</html>